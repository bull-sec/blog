# Kerberos - Port 88

> "No ticky, no laundry" - Jack Nicholson (The Departed)

That's the essential gist of Kerberos, ignore the whole Greek mythology stuff about guarding the gates of Hades, it's just a system that gives out and authenticates tickets, or access tokens if you prefer.

When we're dealing with Kerberos we're pretty limited in what we're able to do without a "ticket" (that's the terminology, get used to it), there are a few scripts for user enumeration and there are one or two CVEs that we can utilise against Kerberos installations:

## Enumeration

Nmap Script for user enumeration against Kerberos v5 (most recent version) `krb5-enum-users.nse`

```bash
# Usage

nmap -sV -p 88 --script krb5-enum-users -vv

```

##  MS14-068 - Kerberos 

[SecWiki MS14-068.py](https://github.com/SecWiki/windows-kernel-exploits/blob/master/MS14-068/pykek/ms14-068.py)

[SecWiki PyKEK - Python Kerberos Exploitation Kit](https://github.com/SecWiki/windows-kernel-exploits/tree/master/MS14-068/pykek)

> According to Microsoft, if an attacker gets Admin rights to your Active Directory environment, itâ€™s game over.

This exploit will work on Windows Server 2008 R2, and it is also possible to exploit it on unpatched versions of Windows Server 2012 and 2012 R2 with mixed success.

## Ticket Harvesting

*Linux*

[White Paper - Kerberos Credential Thievery](https://www.delaat.net/rp/2016-2017/p97/report.pdf)

[Tool based on the white paper - tickey](https://github.com/TarlogicSecurity/tickey)

```bash
/tmp/tickey -i
```

*Windows*

```bash
mimikatz # sekurlsa::tickets /export
.\Rubeus dump
[IO.File]::WriteAllBytes("ticket.kirbi", [Convert]::FromBase64String("<BASE64_TICKET>"))
```

[Blog Post - How to Attack Kerberos](https://www.tarlogic.com/en/blog/how-to-attack-kerberos/)


